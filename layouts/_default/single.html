{{ define "body" }} 
<!-- Inherit from body block defined in baseof.html -->

  {{ partial "header.html" . }}
  
  <div class="container flow-text">
    
    <div class="row">
      <div class="col s12 text-justify">

        <h3 class="col m12 l10">{{ .Title }}</h3>
        <h3 class="col l2 hide-on-med-and-down">
          {{ with .PrevInSection }}
          
            <div class="col s6 flow-text">
                <a href="{{ .Permalink }}" title="Previous" class="valign-wrapper">
                    <i class="medium material-icons">keyboard_arrow_left</i>
                </a>
            </div>
          
          {{ end }}
          
          {{ with .NextInSection }}
      
            <div class="col s6 flow-text">
                <a href="{{ .Permalink }}" title="next" class="valign-wrapper right">
                    <i class="medium material-icons">keyboard_arrow_right</i> 
                </a>
            </div>
      
          {{ end }} 
        </h3>
      </div>
    </div>

    <div class="row">
      {{ partial "breadcrumb.html" . }}
    </div>
     
    <!-- Single Post Content -->
    <div class="row single">
      <div class="col s12 flow-text text-justify">
        {{ .Content }}
      </div>
    </div>
        
    {{ partial "prev-next.html" . }}


    {{ if (isset .Params "series") }}
    <!-- I'm a series blog, so show Table Of Contents -->
      <div class="row">
        <div class="col s12 related">

          <h3>Related:</h3>
          
          <p class="flow-text text-justify">
            <em>This post is part of a series, check out the rest of the posts:</em>
          </p>

          <ul class="collection with-header">
            <li class="collection-header">
                <h4>{{ .Params.series }}</h4>
            </li>

            {{ range where .Site.Pages.ByDate "Params.series" .Params.series }}
              <li class="collection-item">
                  <a href="{{ .Permalink }}" title="{{ .Params.description }}">{{ .Title }} [{{ .Type }}]</a>
              </li>
            {{ end }}
          </ul>
        </div>
      </div>
    
    {{ else }}
    <!-- Else show related posts -->
      <div class="row">
        <div class="col s12 related">
            <h3>Related:</h3>

            <!-- Need to check length, else you get errors and will not generate -->
            {{ if gt (len (.Site.RegularPages.Related .)) 6 }}

              <p class="flow-text text-justify">
                <em>Some other posts if you enjoyed this one:</em>
              </p>

              {{ partial "featured" (.Site.RegularPages.Related . | first 6) }}

            {{ else }}
            <!-- We don't have enough related posts, show the opps -->
              <p class="flow-text text-justify">
                <em>Opps, there does not appear to be any related posts.</em>
              </p>

            {{ end }}

        </div>
      </div>

    {{ end }}

    <div class="row">
      <div class="divider"></div>
    </div>
    
    <div class="row">
      <div class="col s12">
        <h3 id="it-featured">Email List</h3>
        <p class="flow-text text-justify">
          <em>Keep up date with the latest happenings:</em>
        </p>
        
        {{ partial "mailchimp.html" . }}     
      </div>
    </div>

  </div>

{{ end }}